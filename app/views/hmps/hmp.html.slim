= javascript_include_tag "chartkick"
.row.well
  form.form.form_inline action="#{ hmp_path }"
    label
      ="Кількість урн:"
    input type="text" name="count_hidden" style="width: 40px;" value="#{@count_hidden}"
    label
      ="Кількість станів:"
    input type="text" name="count_conditions" style="width: 40px;" value="#{@count_conditions}"
    label
      ="Кількість значень:"
    input type="text" name="count_values" style="width: 40px;" value="#{@count_values}"
    input.btn.btn-primary type="submit" value="Змоделювати"
.row#data
  = "#{@hmp.series.to_json}"
.row
  #container

javascript:
  $(function () {
    var series = $.parseJSON($("#data").text());
    $.each(series, function(index, e){
      e['marker'] = {
          fillColor: {
              radialGradient: { cx: 0.4, cy: 0.3, r: 0.7 },
              stops: [
                  [0, 'rgba(255,255,255,0.5)'],
                  [1, Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0.5).get('rgba')]
              ]
          }
      }
    });

    console.log(series);

    $('#container').highcharts({

        chart: {
            type: 'bubble',
            plotBorderWidth: 1,
            zoomType: 'xy'
        },

        title: {
            text: 'HMP'
        },

        xAxis: {
            gridLineWidth: 1
        },

        yAxis: {
            startOnTick: false,
            endOnTick: false
        },

        series: series

    });
  });